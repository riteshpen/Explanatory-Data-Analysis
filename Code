#  Import these python libraries

import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns



# Loading the data

df = pd.read_csv('housing_test.csv')
df = pd.read_csv('housing_train.csv')

# Data Cleaning

df.head()
df.describe()

# Handling Missing Values

df.isna().sum()
df.info()

mean_lot_frontage = df['LotFrontage'].mean()
df = df.fillna({
    "LotFrontage":mean_lot_frontage,
    'MSZoning':'No MS Zone',
    'SaleType': 'No sale type'      
                })
df.isna().sum()

# Handling Duplicate Data

df.drop_duplicates(inplace=True)
df.shape
df.describe()

# Handling Outliers

min_ScreenPorce, max_ScreenPorch  = df['ScreenPorch'].quantile([0.01, 0.99])

df = df[(df['ScreenPorch'] < max_ScreenPorch) & (df['ScreenPorch'] > min_ScreenPorce)]
print(df.describe())

def z_score(s, mean, std):
    return (s - mean) / std
mean, std = df['MiscVal'].mean(), df['MiscVal'].std()
df["z-score"] = df[['MiscVal']].apply(lambda a: z_score(a, mean, std))

df = df[(df['z-score'] < 2) & (df['z-score'] > -2)]
print(df.describe())


df.drop(columns=['z-score'], inplace=True)

# Data Visualization 

# Pair plot for numerical features
sns.pairplot(df[['LotFrontage', 'LotArea', 'GrLivArea', 'SalePrice']])
plt.show()

# Heatmap for correlation matrix
plt.figure(figsize=(12, 8))
sns.heatmap(df.corr(), annot=True, cmap='coolwarm')
plt.show()

# Distribution plots for key features
sns.histplot(df['LotFrontage'], kde=True)
plt.title('Distribution of LotFrontage')
plt.show()

sns.histplot(df['GrLivArea'], kde=True)
plt.title('Distribution of GrLivArea')
plt.show()

sns.histplot(df['SalePrice'], kde=True)
plt.title('Distribution of SalePrice')
plt.show()

sns.pairplot(df)
plt.show()
